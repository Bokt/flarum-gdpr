{"version":3,"sources":["webpack://@blomstra/flarum-gdpr/webpack/bootstrap","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['common/Model']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['components/Button']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['utils/extractText']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['components/Modal']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['utils/Stream']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['helpers/username']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['extend']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['components/Page']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['utils/ItemList']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['components/SettingsPage']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['components/HeaderSecondary']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['Component']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['helpers/avatar']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['helpers/icon']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@blomstra/flarum-gdpr/external \"flarum.core.compat['components/NotificationsDropdown']\"","webpack://@blomstra/flarum-gdpr/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@blomstra/flarum-gdpr/./src/forum/components/RequestDataModal.js","webpack://@blomstra/flarum-gdpr/./src/forum/components/RequestErasureModal.js","webpack://@blomstra/flarum-gdpr/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@blomstra/flarum-gdpr/./src/forum/models/ErasureRequest.js","webpack://@blomstra/flarum-gdpr/./src/forum/components/ProcessErasureRequestModal.js","webpack://@blomstra/flarum-gdpr/./src/forum/components/ErasureRequestsList.js","webpack://@blomstra/flarum-gdpr/./src/forum/components/ErasureRequestsPage.js","webpack://@blomstra/flarum-gdpr/./src/forum/components/ErasureRequestsDropdown.js","webpack://@blomstra/flarum-gdpr/./src/forum/states/ErasureRequestsListState.js","webpack://@blomstra/flarum-gdpr/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","RequestDataModal","className","title","app","translator","trans","content","Button","component","type","loading","this","onsubmit","e","preventDefault","request","method","url","forum","attribute","then","hide","loaded","Modal","RequestErasureModal","oninit","vnode","reason","Stream","password","fields","toArray","items","ItemList","currRequest","session","user","erasureRequest","add","status","onclick","oncancel","bidi","placeholder","extractText","oninput","target","redraw","data","relationships","store","createRecord","save","meta","pushData","_extends","assign","arguments","length","source","apply","ErasureRequest","Model","createdAt","transformDate","userConfirmedAt","processedAt","processorComment","hasOne","processedBy","ProcessErasureRequestModal","comments","username","attrs","anonymization","deletion","confirm","MediaSource","processor_comment","remove","ErasureRequestsList","view","erasureRequests","all","state","map","showModal","avatar","icon","humanTime","LoadingIndicator","modal","show","Component","ErasureRequestsPage","history","push","load","bodyClass","Page","ErasureRequestsDropdown","initAttrs","label","getMenu","menuClassName","menuClick","showing","goToRoute","route","set","getUnreadCount","requestsLoaded","getNewCount","NotificationsDropdown","ErasureRequestsListState","find","initializers","models","users","routes","path","extend","param","alerts","SettingsPage","HeaderSecondary"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['components/SettingsPage'];","module.exports = flarum.core.compat['components/HeaderSecondary'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['components/NotificationsDropdown'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\n\nexport default class RequestDataModal extends Modal {\n    className() {\n        return 'RequestDataModal Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('blomstra-gdpr.forum.request_data.title');\n    }\n\n    content() {\n        return (\n            <div className=\"Modal-body\">\n                <div className=\"Form Form--centered\">\n                    <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.request_data.text')}</p>\n                    <div className=\"Form-group\">\n                        {Button.component({\n                            className: 'Button Button--primary Button--block',\n                            type: 'submit',\n                            loading: this.loading,\n                        }, app.translator.trans('blomstra-gdpr.forum.request_data.request_button'))}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        this.loading = true;\n\n        app\n            .request({\n                method: 'POST',\n                url: app.forum.attribute('apiUrl') + '/gdpr/export',\n            })\n            .then(this.hide.bind(this), this.loaded.bind(this));\n    }\n}\n","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport extractText from 'flarum/utils/extractText';\nimport ItemList from 'flarum/utils/ItemList';\nimport Stream from 'flarum/utils/Stream';\n\nexport default class RequestErasureModal extends Modal {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.reason = Stream(\"\");\n        this.password = Stream(\"\");\n    }\n\n    className() {\n        return 'RequestErasureModal Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('blomstra-gdpr.forum.request_erasure.title');\n    }\n\n    content() {\n        return (\n            <div className=\"Modal-body\">\n                <div className=\"Form Form--centered\">\n                    {this.fields().toArray()}\n                </div>\n            </div>\n        );\n    }\n\n    fields() {\n        const items = new ItemList();\n\n        const currRequest = app.session.user.erasureRequest();\n\n        if (currRequest) {\n            items.add(\n                'status',\n                <div className=\"Form-group\">\n                    <p className=\"helpText\">{app.translator.trans(`blomstra-gdpr.forum.request_erasure.status.${currRequest.status()}`)}</p>\n                </div>\n            );\n\n            if (currRequest.reason()) {\n                items.add(\n                    'reason',\n                    <div className=\"Form-group\">\n                        <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.request_erasure.reason', { reason: currRequest.reason() })}</p>\n                    </div>\n                );\n            }\n\n            items.add(\n                'cancel',\n                <div className=\"Form-group\">\n                    {Button.component({\n                        className: 'Button Button--primary Button--block',\n                        onclick: this.oncancel.bind(this),\n                        loading: this.loading,\n                    }, app.translator.trans('blomstra-gdpr.forum.request_erasure.cancel_button'))}\n                </div>\n            );\n        } else {\n            items.add(\n                'text',\n                <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.request_erasure.text')}</p>\n            );\n\n            items.add(\n                'password',\n                <div className=\"Form-group\">\n                    <input\n                        type=\"password\"\n                        className=\"FormControl\"\n                        bidi={this.password}\n                        placeholder={extractText(app.translator.trans('blomstra-gdpr.forum.request_erasure.password_label'))}\n                    />\n                </div>\n            );\n\n            items.add(\n                'reason',\n                <div className=\"Form-group\">\n                    <textarea\n                        className=\"FormControl\"\n                        value={this.reason()}\n                        oninput={(e) => this.reason(e.target.value)}\n                        placeholder={extractText(app.translator.trans('blomstra-gdpr.forum.request_erasure.reason_label'))}\n                    ></textarea>\n                </div>\n            );\n\n            items.add(\n                'submit',\n                <div className=\"Form-group\">\n                    {Button.component({\n                        className: 'Button Button--primary Button--block',\n                        type: 'submit',\n                        loading: this.loading,\n                    }, app.translator.trans('blomstra-gdpr.forum.request_erasure.request_button'))}\n                </div>\n            );\n        }\n\n        return items;\n    }\n\n    oncancel(e) {\n        this.loading = true;\n        m.redraw();\n\n        app.session.user\n            .erasureRequest()\n            .delete()\n            .then(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n\n    data() {\n        // Status is set so that the proper confirmation message is displayed.\n        return {\n            reason: this.reason(),\n            status: 'user_confirmed',\n            relationships: { user: app.session.user }\n        }\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        this.loading = true;\n\n        app.store\n            .createRecord('user-erasure-requests')\n            .save(this.data(), { meta: { password: this.password() } })\n            .then(erasureRequest => {\n                app.session.user.pushData({ relationships: { erasureRequest } });\n                this.loading = false;\n                m.redraw();\n            })\n            .catch(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import Model from 'flarum/common/Model';\n\nexport default class ErasureRequest extends Model { }\n\nObject.assign(ErasureRequest.prototype, {\n    status: Model.attribute('status'),\n    reason: Model.attribute('reason'),\n    createdAt: Model.attribute('createdAt', Model.transformDate),\n    userConfirmedAt: Model.attribute('userConfirmedAt', Model.transformDate),\n    processedAt: Model.attribute('processedAt', Model.transformDate),\n    processorComment: Model.attribute('processorComment'),\n\n    user: Model.hasOne('user'),\n    processedBy: Model.hasOne('processedBy'),\n});\n","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport username from 'flarum/helpers/username';\nimport extractText from 'flarum/utils/extractText';\nimport ItemList from 'flarum/utils/ItemList';\nimport Stream from 'flarum/utils/Stream';\n\nexport default class ProcessErasureRequestModal extends Modal {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.comments = Stream(\"\");\n\n        this.loading = {};\n    }\n\n    className() {\n        return 'ProcessErasureRequestModal Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('blomstra-gdpr.forum.process_erasure.title');\n    }\n\n    content() {\n        return (\n            <div className=\"Modal-body\">\n                <div className=\"Form Form--centered\">\n                    {this.fields().toArray()}\n                </div>\n            </div>\n        );\n    }\n\n    fields() {\n        const items = new ItemList();\n\n        items.add(\n            'text',\n            <p className=\"helpText\">{app.translator.trans('blomstra-gdpr.forum.process_erasure.text', { name: username(this.attrs.request.user()) })}</p>\n        );\n\n\n        items.add(\n            'comments',\n            <div className=\"Form-group\">\n                <textarea\n                    className=\"FormControl\"\n                    value={this.comments()}\n                    oninput={(e) => this.comments(e.target.value)}\n                    placeholder={extractText(app.translator.trans('blomstra-gdpr.forum.process_erasure.comments_label'))}\n                ></textarea>\n            </div>\n        );\n\n        if (app.forum.attribute('erasureAnonymizationAllowed')) {\n            items.add(\n                'anonymize',\n                <div className=\"Form-group\">\n                    {Button.component({\n                        className: 'Button Button--primary Button--block',\n                        type: 'submit',\n                        loading: this.loading.anonymization,\n                        onclick: e => this.onsubmit(e, 'anonymization')\n                    }, app.translator.trans('blomstra-gdpr.forum.process_erasure.anonymization_button'))}\n                </div>\n            );\n        }\n\n        if (app.forum.attribute('erasureDeletionAllowed')) {\n            items.add(\n                'delete',\n                <div className=\"Form-group\">\n\n                    {Button.component({\n                        className: 'Button Button--danger Button--block',\n                        type: 'submit',\n                        loading: this.loading.deletion,\n                        onclick: e => this.onsubmit(e, 'deletion')\n                    }, app.translator.trans('blomstra-gdpr.forum.process_erasure.deletion_button'))}\n                </div>\n            );\n        }\n\n        return items;\n    }\n\n    onsubmit(e, mode) {\n        e.preventDefault();\n\n        if (!confirm(app.translator.trans('blomstra-gdpr.forum.process_erasure.confirm', { name: extractText(username(this.attrs.request.user())), mode: extractText(mode) }))) {\n            return;\n        }\n\n        this.loading[MediaSource] = true;\n        m.redraw();\n\n        this.attrs.request\n            .save({ processor_comment: this.comments() }, { meta: { mode } })\n            .then(erasureRequest => {\n                app.store.remove(erasureRequest);\n                this.loading[MediaSource] = false;\n                m.redraw();\n                this.hide();\n            })\n            .catch(() => {\n                this.loading[MediaSource] = false;\n                m.redraw();\n            });\n    }\n}\n","/*\n *\n *  This file is part of fof/erasurerequests.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport Component from 'flarum/Component';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport avatar from 'flarum/helpers/avatar';\nimport icon from 'flarum/helpers/icon';\nimport username from 'flarum/helpers/username';\nimport humanTime from 'flarum/helpers/humanTime';\n\nimport ProcessErasureRequestModal from './ProcessErasureRequestModal';\n\nexport default class ErasureRequestsList extends Component {\n    view() {\n        const erasureRequests = app.store.all('user-erasure-requests');\n        const state = this.attrs.state;\n\n        return (\n            <div className=\"NotificationList ErasureRequestsList\">\n                <div className=\"NotificationList-header\">\n                    <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('blomstra-gdpr.forum.erasure_requests.title')}</h4>\n                </div>\n                <div className=\"NotificationList-content\">\n                    <ul className=\"NotificationGroup-content\">\n                        {erasureRequests.length ? (\n                            erasureRequests.map((request) => {\n                                return (\n                                    <li>\n                                        <a onclick={this.showModal.bind(this, request)} className=\"Notification Request\">\n                                            {avatar(request.user())}\n                                            {icon('fas fa-user-edit', { className: 'Notification-icon' })}\n                                            <span className=\"Notification-content\">\n                                                {app.translator.trans(`blomstra-gdpr.forum.erasure_requests.item_text`, {\n                                                    name: username(request.user()),\n                                                })}\n                                            </span>\n                                            {humanTime(request.createdAt())}\n                                        </a>\n                                    </li>\n                                );\n                            })\n                        ) : !state.loading ? (\n                            <div className=\"NotificationList-empty\">{app.translator.trans('blomstra-gdpr.forum.erasure_requests.empty_text')}</div>\n                        ) : (\n                            LoadingIndicator.component({ className: 'LoadingIndicator--block' })\n                        )}\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    showModal(request) {\n        app.modal.show(ProcessErasureRequestModal, { request });\n    }\n}\n","/*\n *\n *  This file is part of fof/erasurerequests.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport Page from 'flarum/components/Page';\n\nimport ErasureRequestsList from './ErasureRequestsList';\n\nexport default class ErasureRequestsPage extends Page {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        app.history.push('erasure-requests');\n\n        app.erasureRequests.load();\n\n        this.bodyClass = 'App--ErasureRequests';\n    }\n\n    view() {\n        return (\n            <div className=\"ErasureRequestsPage\">\n                <ErasureRequestsList state={app.erasureRequests}></ErasureRequestsList>\n            </div>\n        );\n    }\n}\n","/*\n *\n *  This file is part of fof/erasurerequests.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport NotificationsDropdown from 'flarum/components/NotificationsDropdown';\n\nimport ErasureRequestsList from './ErasureRequestsList';\n\nexport default class ErasureRequestsDropdown extends NotificationsDropdown {\n    static initAttrs(attrs) {\n        attrs.label = attrs.label || app.translator.trans('blomstra-gdpr.forum.erasure_requests.tooltip');\n        attrs.icon = attrs.icon || 'fas fa-user-minus';\n\n        super.initAttrs(attrs);\n    }\n\n    getMenu() {\n        return (\n            <div className={'Dropdown-menu ' + this.attrs.menuClassName} onclick={this.menuClick.bind(this)}>\n                {this.showing ? ErasureRequestsList.component({ state: this.attrs.state }) : ''}\n            </div>\n        );\n    }\n\n    goToRoute() {\n        m.route.set(app.route('erasure-requests'));\n    }\n\n    getUnreadCount() {\n        if (!this.attrs.state.requestsLoaded) {\n            return app.forum.attribute('erasureRequestCount');\n        }\n\n        return app.store.all('erasure-requests').length;\n    }\n\n    getNewCount() {\n        return this.getUnreadCount();\n    }\n}\n","export default class ErasureRequestsListState {\n    constructor(app) {\n        this.app = app;\n\n        this.loading = false;\n\n        this.requestsLoaded = false;\n    }\n\n    load() {\n        if (this.requestsLoaded) {\n            return;\n        }\n\n        this.loading = true;\n        m.redraw();\n\n        app.store\n            .find('user-erasure-requests')\n            .then(\n                () => (this.requestsLoaded = true),\n                () => {}\n            )\n            .then(() => {\n                this.loading = false;\n                m.redraw();\n            });\n    }\n}\n","import { extend } from 'flarum/extend';\nimport Model from 'flarum/common/Model';\nimport Button from 'flarum/components/Button';\nimport HeaderSecondary from 'flarum/components/HeaderSecondary';\nimport Page from 'flarum/components/Page';\nimport SettingsPage from 'flarum/components/SettingsPage';\nimport RequestDataModal from './components/RequestDataModal';\nimport RequestErasureModal from './components/RequestErasureModal';\nimport ErasureRequest from './models/ErasureRequest';\nimport ErasureRequestsPage from './components/ErasureRequestsPage';\nimport ErasureRequestsDropdown from './components/ErasureRequestsDropdown';\nimport ErasureRequestsListState from './states/ErasureRequestsListState';\n\n\napp.initializers.add(\n    'blomstra-gdpr',\n    () => {\n        app.store.models['user-erasure-requests'] = ErasureRequest;\n        app.store.models.users.prototype.erasureRequest = Model.hasOne('erasureRequest');\n\n        app.routes['erasure-requests'] = { path: '/erasure-requests', component: ErasureRequestsPage };\n\n        app.erasureRequests = new ErasureRequestsListState(app);\n\n        extend(Page.prototype, 'oninit', function () {\n            if (m.route.param('erasureRequestConfirmed')) {\n                app.alerts.show({ type: 'success' }, app.translator.trans('blomstra-gdpr.forum.erasure_request_confirmed'));\n            }\n        });\n\n        extend(SettingsPage.prototype, 'accountItems', function (items) {\n            items.add(\n                'gdprErasure',\n                Button.component({\n                    className: 'Button',\n                    onclick: () => app.modal.show(RequestErasureModal),\n                }, app.translator.trans('blomstra-gdpr.forum.settings.request_erasure_button'))\n            );\n        });\n\n        extend(SettingsPage.prototype, 'accountItems', function (items) {\n            items.add(\n                'gdprExport',\n                Button.component({\n                    className: 'Button',\n                    onclick: () => app.modal.show(RequestDataModal),\n                }, app.translator.trans('blomstra-gdpr.forum.settings.export_data_button'))\n            );\n        });\n\n        extend(HeaderSecondary.prototype, 'items', function (items) {\n            if (app.forum.attribute('erasureRequestCount')) {\n                items.add('UsernameRequests', <ErasureRequestsDropdown state={app.erasureRequests} />, 20);\n            }\n        });\n    }\n);\n"],"sourceRoot":""}